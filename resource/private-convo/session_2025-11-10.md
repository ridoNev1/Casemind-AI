Skoring yang dipakai di backend

## Rule Score

- Dibentuk dari flag deterministik: short_stay_high_cost, severity_mismatch, high_cost_full_paid, duplicate_pattern.
- Tiap flag punya bobot (0.5–0.8). Rule score = bobot tertinggi di antara flag yang aktif.
- Fokusnya heuristik bisnis: LOS pendek tapi biaya tinggi, severity tidak konsisten, dsb.

## ML Score (raw)

- Keluaran asli model anomaly detection (bisa berupa z‑score/logit). Masih di skala internal model, tidak selalu 0–1.

## ML Score Normalized

- Versi ML score yang sudah diproyeksikan ke rentang 0–1 supaya bisa langsung dibandingkan dengan rule score. Semakin dekat 1, model semakin yakin klaim outlier.

## Risk Score

- Nilai final untuk ranking: risk_score = max(rule_score, ml_score_normalized).
- Artinya jika aturan atau ML menilai tinggi, klaim langsung dianggap prioritas.

## Flag Metadata

- Selain angka, backend mengirim array flags sehingga UI tahu alasan kenapa rule score tinggi.

## Status Reviewed

- Bukan skoring, tapi backend menempelkan latest_feedback. FE pakai ini untuk badge “Reviewed/Pending”.

## Notebook ml/training/notebooks/deteksi_anomali_unsupervised.ipynb

- Itu notebook training model anomaly detection unsupervised (kemungkinan Isolation Forest / DBSCAN / AutoEncoder, sesuai isi notebook).
- Fungsinya: membaca dataset klaim normalisasi, melakukan feature engineering, melatih model yang mengenali outlier berdasarkan pola biaya, LOS, dx, dll.
- Hasil akhirnya (model terlatih + pipeline preprocessing) disimpan ke lokasi ml/inference agar MLScorer di backend bisa memuatnya saat aplikasi berjalan.
- Notebook juga mencatat metrik, threshold, dan menyimpan artefak (mis. file .pkl atau .onnx) yang kemudian dipakai saat scoring di runtime.

## Jadi alurnya:

- Notebook melatih & simpan model unsupervised.
- MLScorer menggunakan model itu untuk memberi ml_score.
- Backend menggabungkan dengan rule heuristics → risk_score.
- FE menampilkan risk score + flag sebagai insight bagi auditor.
